=========================================
Terraform Fix Replicas - Fri Feb 13 05:47:29 PM UTC 2026
=========================================

[Fri Feb 13 05:47:29 PM UTC 2026] Starting fix process...

=== STEP 1: Current Terraform State ===
# helm_release.iqgeo:
resource "helm_release" "iqgeo" {
    atomic                     = false
    chart                      = "oci://harbor.delivery.iqgeo.cloud/helm/iqgeo-platform"
    cleanup_on_fail            = false
    create_namespace           = false
    dependency_update          = false
    disable_crd_hooks          = false
    disable_openapi_validation = false
    disable_webhooks           = false
    force_update               = false
    id                         = "iqgeo"
    lint                       = false
    max_history                = 0
    metadata                   = [
        {
            app_version    = "7.0.0"
            chart          = "iqgeo-platform"
            first_deployed = 1771004478
            last_deployed  = 1771004478
            name           = "iqgeo"
            namespace      = "iqgeo"
            notes          = <<-EOT
                1. Get the application URL by running these commands:
                     NOTE: It may take a few minutes for the LoadBalancer IP to be available.
                           You can watch the status of by running 'kubectl get --namespace iqgeo svc -w iqgeo-iqgeo-platform'
                  export SERVICE_IP=$(kubectl get svc --namespace iqgeo iqgeo-iqgeo-platform --template "{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}")
                  echo http://$SERVICE_IP:80
                
                CHART NAME: memcached
                CHART VERSION: 6.1.9
                APP VERSION: 1.6.16
                
                ** Please be patient while the chart is being deployed **
                
                Memcached can be accessed via port 11211 on the following DNS name from within your cluster:
                
                    iqgeo-memcached.iqgeo.svc.cluster.local
            EOT
            revision       = 1
            values         = jsonencode(
                {
                    database         = {
                        host     = "10.42.42.9"
                        name     = "iqgeo"
                        password = "6hPfVGmi9gMMhhmE5pR64xDz4ahcQnvg"
                        port     = "5432"
                        user     = "iqgeo"
                    }
                    extra            = {}

=== STEP 2: Current Kubernetes Deployment State ===
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    deployment.kubernetes.io/revision: "1"
    meta.helm.sh/release-name: iqgeo
    meta.helm.sh/release-namespace: iqgeo
  creationTimestamp: "2026-02-13T17:41:20Z"
  generation: 2
  labels:
    app: iqgeo-platform
    app.kubernetes.io/instance: iqgeo
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: iqgeo-platform
    app.kubernetes.io/version: 7.0.0
    chart: iqgeo-platform-2.14.0
    helm.sh/chart: iqgeo-platform-2.14.0
    heritage: Helm
    release: iqgeo
  name: iqgeo-platform
  namespace: iqgeo
  resourceVersion: "2611925"
  uid: 164d2cc3-cd67-4e07-bb49-3a2efe346385
spec:
  progressDeadlineSeconds: 600
  replicas: 3
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      app: iqgeo-platform
      app.kubernetes.io/instance: iqgeo
      app.kubernetes.io/name: iqgeo-platform
      namespace: iqgeo
      release: iqgeo
  strategy:
    rollingUpdate:
      maxSurge: 25%
      maxUnavailable: 25%
    type: RollingUpdate
  template:
    metadata:
      annotations:
        checksum/config: 478a86ee23546a3f0f7cf69bdd3975a55b88d880c3d9b209f0d32c3b1c1e3f80
      creationTimestamp: null
      labels:
        app: iqgeo-platform
        app.kubernetes.io/instance: iqgeo
        app.kubernetes.io/name: iqgeo-platform
        heritage: Helm
        namespace: iqgeo
        release: iqgeo
      name: iqgeo-platform
    spec:
      containers:
      - env:
        - name: RQ_REDIS_URL
          value: redis://iqgeo-redis-master:6379/1
        - name: SEND_ERROR_LOG_TO_STDERR
          value: "YES"
        - name: SEND_ACCESS_LOG_TO_STDOUT
          value: "YES"
        - name: APACHE_TIMEOUT
          value: "1200"
        envFrom:
        - configMapRef:
            name: iqgeo-platform-configmap
            optional: false
        image: harbor.delivery.iqgeo.cloud/nmti-trials/editions-nmt-comms-cloud:7.3
        imagePullPolicy: IfNotPresent
        name: iqgeo-platform
        ports:
        - containerPort: 8080
          name: http
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /healthcheck.html
            port: http
            scheme: HTTP
          initialDelaySeconds: 30
          periodSeconds: 15
          successThreshold: 1
          timeoutSeconds: 2
        resources:
          limits:
            cpu: "2"
            memory: 2Gi
          requests:
            cpu: 500m
            memory: 1Gi
        securityContext: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /shared-data
          name: iqgeo-platform-shared-data
      dnsPolicy: ClusterFirst
      imagePullSecrets:
      - name: harbor-repository
      initContainers:
      - command:
        - bash
        - -c
        - 'until pg_isready; do echo "ERROR: $MYW_DB_HOST:${MYW_DB_PORT:-5432} not
          accepting connections"; done'
        envFrom:
        - configMapRef:
            name: iqgeo-platform-configmap
            optional: false
        image: harbor.delivery.iqgeo.cloud/nmti-trials/editions-nmt-comms-cloud:7.3
        imagePullPolicy: IfNotPresent
        name: init-ensure-db-connection
        resources: {}
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      serviceAccount: iqgeo-platform
      serviceAccountName: iqgeo-platform
      terminationGracePeriodSeconds: 30
      volumes:
      - name: iqgeo-platform-shared-data
        persistentVolumeClaim:
          claimName: iqgeo-platform-shared-data
status:
  conditions:
  - lastTransitionTime: "2026-02-13T17:41:21Z"
    lastUpdateTime: "2026-02-13T17:41:21Z"
    message: Deployment does not have minimum availability.
    reason: MinimumReplicasUnavailable
    status: "False"
    type: Available
  - lastTransitionTime: "2026-02-13T17:41:21Z"
    lastUpdateTime: "2026-02-13T17:41:23Z"
    message: ReplicaSet "iqgeo-platform-65448dfd68" is progressing.
    reason: ReplicaSetUpdated
    status: "True"
    type: Progressing
  observedGeneration: 2
  replicas: 3
  unavailableReplicas: 3
  updatedReplicas: 3

=== Current Pods ===
NAME                               READY   STATUS    RESTARTS   AGE
iqgeo-memcached-69d7fd799c-f9rbc   1/1     Running   0          6m10s
iqgeo-platform-65448dfd68-dbllw    0/1     Pending   0          6m9s
iqgeo-platform-65448dfd68-qgntl    0/1     Pending   0          6m9s
iqgeo-platform-65448dfd68-tsdvl    0/1     Pending   0          6m10s

=== STEP 3: Checking terraform.tfvars ===
replica_count = 1  # Reduced to 1 to fit on-prem cluster resources

=== STEP 4: Terraform Plan (before fix) ===
[0m[1mnull_resource.helm_registry_login[0]: Refreshing state... [id=7183044719346953613][0m
[0m[1mhelm_release.iqgeo: Refreshing state... [id=iqgeo][0m

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
[31m-[0m/[32m+[0m destroy and then create replacement[0m

Terraform will perform the following actions:

[1m  # helm_release.iqgeo[0m will be [1m[31mreplaced[0m, as requested
[0m[31m-[0m/[32m+[0m[0m resource "helm_release" "iqgeo" {
      [33m~[0m[0m id                         = "iqgeo" -> (known after apply)
      [32m+[0m[0m manifest                   = (known after apply)
      [33m~[0m[0m metadata                   = [
          [31m-[0m[0m {
              [31m-[0m[0m app_version    = "7.0.0"
              [31m-[0m[0m chart          = "iqgeo-platform"
              [31m-[0m[0m first_deployed = 1771004478
              [31m-[0m[0m last_deployed  = 1771004478
              [31m-[0m[0m name           = "iqgeo"
              [31m-[0m[0m namespace      = "iqgeo"
              [31m-[0m[0m notes          = <<-EOT
                    1. Get the application URL by running these commands:
                         NOTE: It may take a few minutes for the LoadBalancer IP to be available.
                               You can watch the status of by running 'kubectl get --namespace iqgeo svc -w iqgeo-iqgeo-platform'
                      export SERVICE_IP=$(kubectl get svc --namespace iqgeo iqgeo-iqgeo-platform --template "{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}")
                      echo http://$SERVICE_IP:80
                    
                    CHART NAME: memcached
                    CHART VERSION: 6.1.9
                    APP VERSION: 1.6.16
                    
                    ** Please be patient while the chart is being deployed **
                    
                    Memcached can be accessed via port 11211 on the following DNS name from within your cluster:
                    
                        iqgeo-memcached.iqgeo.svc.cluster.local
                EOT
              [31m-[0m[0m revision       = 1
              [31m-[0m[0m values         = jsonencode(
                    {
                      [31m-[0m[0m database         = {
                          [31m-[0m[0m host     = "10.42.42.9"
                          [31m-[0m[0m name     = "iqgeo"
                          [31m-[0m[0m password = "6hPfVGmi9gMMhhmE5pR64xDz4ahcQnvg"
                          [31m-[0m[0m port     = "5432"
                          [31m-[0m[0m user     = "iqgeo"
                        }
                      [31m-[0m[0m extra            = {}
                      [31m-[0m[0m image            = {
                          [31m-[0m[0m pullPolicy = "IfNotPresent"
                          [31m-[0m[0m repository = "harbor.delivery.iqgeo.cloud/nmti-trials/editions-nmt-comms-cloud"
                          [31m-[0m[0m tag        = "7.3"
                        }
                      [31m-[0m[0m imagePullSecrets = [
                          [31m-[0m[0m "harbor-repository",
                        ]
                      [31m-[0m[0m ingress          = {
                          [31m-[0m[0m className = [90mnull[0m[0m
                          [31m-[0m[0m enabled   = false
                          [31m-[0m[0m hosts     = [
                              [31m-[0m[0m {
                                  [31m-[0m[0m host  = "iqgeo-tf.techwave.com"
                                  [31m-[0m[0m paths = []
                                },
                            ]
                          [31m-[0m[0m tls       = []
                        }
                      [31m-[0m[0m persistence      = {
                          [31m-[0m[0m accessModes  = [
                              [31m-[0m[0m "ReadWriteOnce",
                            ]
                          [31m-[0m[0m enabled      = true
                          [31m-[0m[0m size         = "50Gi"
                          [31m-[0m[0m storageClass = "efs"
                        }
                      [31m-[0m[0m replicaCount     = 1
                      [31m-[0m[0m resources        = {
                          [31m-[0m[0m limits   = {
                              [31m-[0m[0m cpu    = "1"
                              [31m-[0m[0m memory = "1Gi"
                            }
                          [31m-[0m[0m requests = {
                              [31m-[0m[0m cpu    = "500m"
                              [31m-[0m[0m memory = "512Mi"
                            }
                        }
                      [31m-[0m[0m service          = {
                          [31m-[0m[0m port = 80
                          [31m-[0m[0m type = "LoadBalancer"
                        }
                    }
                )
              [31m-[0m[0m version        = "2.14.0"
            },
        ] -> (known after apply)
        name                       = "iqgeo"
        [90m# (26 unchanged attributes hidden)[0m[0m

      [32m+[0m[0m set {
          [32m+[0m[0m name  = "autoscaling.enabled"
          [32m+[0m[0m value = "false"
            [90m# (1 unchanged attribute hidden)[0m[0m
        }
      [32m+[0m[0m set {
          [32m+[0m[0m name  = "replicaCount"
          [32m+[0m[0m value = "1"
            [90m# (1 unchanged attribute hidden)[0m[0m
        }
      [32m+[0m[0m set {
          [32m+[0m[0m name  = "resources.limits.cpu"
          [32m+[0m[0m value = "1"
            [90m# (1 unchanged attribute hidden)[0m[0m
        }
      [32m+[0m[0m set {
          [32m+[0m[0m name  = "resources.limits.memory"
          [32m+[0m[0m value = "1Gi"
            [90m# (1 unchanged attribute hidden)[0m[0m
        }
      [32m+[0m[0m set {
          [32m+[0m[0m name  = "resources.requests.cpu"
          [32m+[0m[0m value = "500m"
            [90m# (1 unchanged attribute hidden)[0m[0m
        }
      [32m+[0m[0m set {
          [32m+[0m[0m name  = "resources.requests.memory"
          [32m+[0m[0m value = "512Mi"
            [90m# (1 unchanged attribute hidden)[0m[0m
        }
    }

[1mPlan:[0m [0m1 to add, 0 to change, 1 to destroy.
[90m
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

Note: You didn't use the -out option to save this plan, so Terraform can't
guarantee to take exactly these actions if you run "terraform apply" now.

=== STEP 5: Applying Terraform Fix ===
[Fri Feb 13 05:47:35 PM UTC 2026] Running: terraform apply -replace=helm_release.iqgeo
Note: Using set_values to force override replicaCount and resources
[0m[1mnull_resource.helm_registry_login[0]: Refreshing state... [id=7183044719346953613][0m
[0m[1mhelm_release.iqgeo: Refreshing state... [id=iqgeo][0m

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
[31m-[0m/[32m+[0m destroy and then create replacement[0m

Terraform will perform the following actions:

[1m  # helm_release.iqgeo[0m will be [1m[31mreplaced[0m, as requested
[0m[31m-[0m/[32m+[0m[0m resource "helm_release" "iqgeo" {
      [33m~[0m[0m id                         = "iqgeo" -> (known after apply)
      [32m+[0m[0m manifest                   = (known after apply)
      [33m~[0m[0m metadata                   = [
          [31m-[0m[0m {
              [31m-[0m[0m app_version    = "7.0.0"
              [31m-[0m[0m chart          = "iqgeo-platform"
              [31m-[0m[0m first_deployed = 1771004478
              [31m-[0m[0m last_deployed  = 1771004478
              [31m-[0m[0m name           = "iqgeo"
              [31m-[0m[0m namespace      = "iqgeo"
              [31m-[0m[0m notes          = <<-EOT
                    1. Get the application URL by running these commands:
                         NOTE: It may take a few minutes for the LoadBalancer IP to be available.
                               You can watch the status of by running 'kubectl get --namespace iqgeo svc -w iqgeo-iqgeo-platform'
                      export SERVICE_IP=$(kubectl get svc --namespace iqgeo iqgeo-iqgeo-platform --template "{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}")
                      echo http://$SERVICE_IP:80
                    
                    CHART NAME: memcached
                    CHART VERSION: 6.1.9
                    APP VERSION: 1.6.16
                    
                    ** Please be patient while the chart is being deployed **
                    
                    Memcached can be accessed via port 11211 on the following DNS name from within your cluster:
                    
                        iqgeo-memcached.iqgeo.svc.cluster.local
                EOT
              [31m-[0m[0m revision       = 1
              [31m-[0m[0m values         = jsonencode(
                    {
                      [31m-[0m[0m database         = {
                          [31m-[0m[0m host     = "10.42.42.9"
                          [31m-[0m[0m name     = "iqgeo"
                          [31m-[0m[0m password = "6hPfVGmi9gMMhhmE5pR64xDz4ahcQnvg"
                          [31m-[0m[0m port     = "5432"
                          [31m-[0m[0m user     = "iqgeo"
                        }
                      [31m-[0m[0m extra            = {}
                      [31m-[0m[0m image            = {
                          [31m-[0m[0m pullPolicy = "IfNotPresent"
                          [31m-[0m[0m repository = "harbor.delivery.iqgeo.cloud/nmti-trials/editions-nmt-comms-cloud"
                          [31m-[0m[0m tag        = "7.3"
                        }
                      [31m-[0m[0m imagePullSecrets = [
                          [31m-[0m[0m "harbor-repository",
                        ]
                      [31m-[0m[0m ingress          = {
                          [31m-[0m[0m className = [90mnull[0m[0m
                          [31m-[0m[0m enabled   = false
                          [31m-[0m[0m hosts     = [
                              [31m-[0m[0m {
                                  [31m-[0m[0m host  = "iqgeo-tf.techwave.com"
                                  [31m-[0m[0m paths = []
                                },
                            ]
                          [31m-[0m[0m tls       = []
                        }
                      [31m-[0m[0m persistence      = {
                          [31m-[0m[0m accessModes  = [
                              [31m-[0m[0m "ReadWriteOnce",
                            ]
                          [31m-[0m[0m enabled      = true
                          [31m-[0m[0m size         = "50Gi"
                          [31m-[0m[0m storageClass = "efs"
                        }
                      [31m-[0m[0m replicaCount     = 1
                      [31m-[0m[0m resources        = {
                          [31m-[0m[0m limits   = {
                              [31m-[0m[0m cpu    = "1"
                              [31m-[0m[0m memory = "1Gi"
                            }
                          [31m-[0m[0m requests = {
                              [31m-[0m[0m cpu    = "500m"
                              [31m-[0m[0m memory = "512Mi"
                            }
                        }
                      [31m-[0m[0m service          = {
                          [31m-[0m[0m port = 80
                          [31m-[0m[0m type = "LoadBalancer"
                        }
                    }
                )
              [31m-[0m[0m version        = "2.14.0"
            },
        ] -> (known after apply)
        name                       = "iqgeo"
        [90m# (26 unchanged attributes hidden)[0m[0m

      [32m+[0m[0m set {
          [32m+[0m[0m name  = "autoscaling.enabled"
          [32m+[0m[0m value = "false"
            [90m# (1 unchanged attribute hidden)[0m[0m
        }
      [32m+[0m[0m set {
          [32m+[0m[0m name  = "replicaCount"
          [32m+[0m[0m value = "1"
            [90m# (1 unchanged attribute hidden)[0m[0m
        }
      [32m+[0m[0m set {
          [32m+[0m[0m name  = "resources.limits.cpu"
          [32m+[0m[0m value = "1"
            [90m# (1 unchanged attribute hidden)[0m[0m
        }
      [32m+[0m[0m set {
          [32m+[0m[0m name  = "resources.limits.memory"
          [32m+[0m[0m value = "1Gi"
            [90m# (1 unchanged attribute hidden)[0m[0m
        }
      [32m+[0m[0m set {
          [32m+[0m[0m name  = "resources.requests.cpu"
          [32m+[0m[0m value = "500m"
            [90m# (1 unchanged attribute hidden)[0m[0m
        }
      [32m+[0m[0m set {
          [32m+[0m[0m name  = "resources.requests.memory"
          [32m+[0m[0m value = "512Mi"
            [90m# (1 unchanged attribute hidden)[0m[0m
        }
    }

[1mPlan:[0m [0m1 to add, 0 to change, 1 to destroy.
[0m[1mhelm_release.iqgeo: Destroying... [id=iqgeo][0m[0m
[0m[1mhelm_release.iqgeo: Destruction complete after 2s[0m
[0m[1mhelm_release.iqgeo: Creating...[0m[0m
[0m[1mhelm_release.iqgeo: Creation complete after 3s [id=iqgeo][0m
[0m[1m[32m
Apply complete! Resources: 1 added, 0 changed, 1 destroyed.[0m
[0m[1m[32m
Outputs:

[0mapplication_url = "Check service: kubectl get svc -n iqgeo"
namespace = "iqgeo"
release_name = "iqgeo"
status = "deployed"
version = "2.14.0"

[Fri Feb 13 05:47:46 PM UTC 2026] âœ… Terraform apply completed successfully

[Fri Feb 13 05:47:46 PM UTC 2026] Waiting 30 seconds for Kubernetes to process changes...

=== STEP 6: Deployment State After Fix ===
NAME             READY   UP-TO-DATE   AVAILABLE   AGE
iqgeo-platform   0/3     3            0           30s

=== Pods After Fix ===
NAME                               READY   STATUS    RESTARTS   AGE
iqgeo-memcached-69d7fd799c-klgbw   1/1     Running   0          30s
iqgeo-platform-65448dfd68-drfb4    0/1     Pending   0          23s
iqgeo-platform-65448dfd68-g4cpf    0/1     Pending   0          23s
iqgeo-platform-65448dfd68-xv8gs    0/1     Pending   0          30s

=== STEP 7: Pod Details ===
--- pod/iqgeo-platform-65448dfd68-drfb4 ---
Name:             iqgeo-platform-65448dfd68-drfb4
Namespace:        iqgeo
Priority:         0
Service Account:  iqgeo-platform
Node:             <none>
Labels:           app=iqgeo-platform
                  app.kubernetes.io/instance=iqgeo
                  app.kubernetes.io/name=iqgeo-platform
                  heritage=Helm
                  namespace=iqgeo
                  pod-template-hash=65448dfd68
                  release=iqgeo
Annotations:      checksum/config: 478a86ee23546a3f0f7cf69bdd3975a55b88d880c3d9b209f0d32c3b1c1e3f80
Status:           Pending
IP:               
IPs:              <none>
Controlled By:    ReplicaSet/iqgeo-platform-65448dfd68
Init Containers:
  init-ensure-db-connection:
    Image:      harbor.delivery.iqgeo.cloud/nmti-trials/editions-nmt-comms-cloud:7.3
    Port:       <none>
    Host Port:  <none>
    Command:
      bash
      -c
      until pg_isready; do echo "ERROR: $MYW_DB_HOST:${MYW_DB_PORT:-5432} not accepting connections"; done
    Environment Variables from:
      iqgeo-platform-configmap  ConfigMap  Optional: false
    Environment:                <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-8mwpn (ro)
Containers:
  iqgeo-platform:
    Image:      harbor.delivery.iqgeo.cloud/nmti-trials/editions-nmt-comms-cloud:7.3
    Port:       8080/TCP (http)
    Host Port:  0/TCP (http)
    Limits:
      cpu:     2
      memory:  2Gi
    Requests:
      cpu:      500m
      memory:   1Gi
    Readiness:  http-get http://:http/healthcheck.html delay=30s timeout=2s period=15s #success=1 #failure=3
    Environment Variables from:
      iqgeo-platform-configmap  ConfigMap  Optional: false
    Environment:
      RQ_REDIS_URL:               redis://iqgeo-redis-master:6379/1
      SEND_ERROR_LOG_TO_STDERR:   YES
      SEND_ACCESS_LOG_TO_STDOUT:  YES
      APACHE_TIMEOUT:             1200
    Mounts:
      /shared-data from iqgeo-platform-shared-data (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-8mwpn (ro)
Conditions:
  Type           Status
  PodScheduled   False 
Volumes:
  iqgeo-platform-shared-data:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  iqgeo-platform-shared-data
    ReadOnly:   false
  kube-api-access-8mwpn:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    Optional:                false
    DownwardAPI:             true
QoS Class:                   Burstable
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason            Age   From               Message
  ----     ------            ----  ----               -------
  Warning  FailedScheduling  24s   default-scheduler  0/3 nodes are available: 1 node(s) had untolerated taint {node-role.kubernetes.io/control-plane: }, 2 Insufficient memory. preemption: 0/3 nodes are available: 1 Preemption is not helpful for scheduling, 2 No preemption victims found for incoming pod..

--- pod/iqgeo-platform-65448dfd68-g4cpf ---
Name:             iqgeo-platform-65448dfd68-g4cpf
Namespace:        iqgeo
Priority:         0
Service Account:  iqgeo-platform
Node:             <none>
Labels:           app=iqgeo-platform
                  app.kubernetes.io/instance=iqgeo
                  app.kubernetes.io/name=iqgeo-platform
                  heritage=Helm
                  namespace=iqgeo
                  pod-template-hash=65448dfd68
                  release=iqgeo
Annotations:      checksum/config: 478a86ee23546a3f0f7cf69bdd3975a55b88d880c3d9b209f0d32c3b1c1e3f80
Status:           Pending
IP:               
IPs:              <none>
Controlled By:    ReplicaSet/iqgeo-platform-65448dfd68
Init Containers:
  init-ensure-db-connection:
    Image:      harbor.delivery.iqgeo.cloud/nmti-trials/editions-nmt-comms-cloud:7.3
    Port:       <none>
    Host Port:  <none>
    Command:
      bash
      -c
      until pg_isready; do echo "ERROR: $MYW_DB_HOST:${MYW_DB_PORT:-5432} not accepting connections"; done
    Environment Variables from:
      iqgeo-platform-configmap  ConfigMap  Optional: false
    Environment:                <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-5pgkj (ro)
Containers:
  iqgeo-platform:
    Image:      harbor.delivery.iqgeo.cloud/nmti-trials/editions-nmt-comms-cloud:7.3
    Port:       8080/TCP (http)
    Host Port:  0/TCP (http)
    Limits:
      cpu:     2
      memory:  2Gi
    Requests:
      cpu:      500m
      memory:   1Gi
    Readiness:  http-get http://:http/healthcheck.html delay=30s timeout=2s period=15s #success=1 #failure=3
    Environment Variables from:
      iqgeo-platform-configmap  ConfigMap  Optional: false
    Environment:
      RQ_REDIS_URL:               redis://iqgeo-redis-master:6379/1
      SEND_ERROR_LOG_TO_STDERR:   YES
      SEND_ACCESS_LOG_TO_STDOUT:  YES
      APACHE_TIMEOUT:             1200
    Mounts:
      /shared-data from iqgeo-platform-shared-data (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-5pgkj (ro)
Conditions:
  Type           Status
  PodScheduled   False 
Volumes:
  iqgeo-platform-shared-data:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  iqgeo-platform-shared-data
    ReadOnly:   false
  kube-api-access-5pgkj:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    Optional:                false
    DownwardAPI:             true
QoS Class:                   Burstable
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason            Age   From               Message
  ----     ------            ----  ----               -------
  Warning  FailedScheduling  24s   default-scheduler  0/3 nodes are available: 1 node(s) had untolerated taint {node-role.kubernetes.io/control-plane: }, 2 Insufficient memory. preemption: 0/3 nodes are available: 1 Preemption is not helpful for scheduling, 2 No preemption victims found for incoming pod..

--- pod/iqgeo-platform-65448dfd68-xv8gs ---
Name:             iqgeo-platform-65448dfd68-xv8gs
Namespace:        iqgeo
Priority:         0
Service Account:  iqgeo-platform
Node:             <none>
Labels:           app=iqgeo-platform
                  app.kubernetes.io/instance=iqgeo
                  app.kubernetes.io/name=iqgeo-platform
                  heritage=Helm
                  namespace=iqgeo
                  pod-template-hash=65448dfd68
                  release=iqgeo
Annotations:      checksum/config: 478a86ee23546a3f0f7cf69bdd3975a55b88d880c3d9b209f0d32c3b1c1e3f80
Status:           Pending
IP:               
IPs:              <none>
Controlled By:    ReplicaSet/iqgeo-platform-65448dfd68
Init Containers:
  init-ensure-db-connection:
    Image:      harbor.delivery.iqgeo.cloud/nmti-trials/editions-nmt-comms-cloud:7.3
    Port:       <none>
    Host Port:  <none>
    Command:
      bash
      -c
      until pg_isready; do echo "ERROR: $MYW_DB_HOST:${MYW_DB_PORT:-5432} not accepting connections"; done
    Environment Variables from:
      iqgeo-platform-configmap  ConfigMap  Optional: false
    Environment:                <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-fdnvh (ro)
Containers:
  iqgeo-platform:
    Image:      harbor.delivery.iqgeo.cloud/nmti-trials/editions-nmt-comms-cloud:7.3
    Port:       8080/TCP (http)
    Host Port:  0/TCP (http)
    Limits:
      cpu:     2
      memory:  2Gi
    Requests:
      cpu:      500m
      memory:   1Gi
    Readiness:  http-get http://:http/healthcheck.html delay=30s timeout=2s period=15s #success=1 #failure=3
    Environment Variables from:
      iqgeo-platform-configmap  ConfigMap  Optional: false
    Environment:
      RQ_REDIS_URL:               redis://iqgeo-redis-master:6379/1
      SEND_ERROR_LOG_TO_STDERR:   YES
      SEND_ACCESS_LOG_TO_STDOUT:  YES
      APACHE_TIMEOUT:             1200
    Mounts:
      /shared-data from iqgeo-platform-shared-data (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-fdnvh (ro)
Volumes:
  iqgeo-platform-shared-data:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  iqgeo-platform-shared-data
    ReadOnly:   false
  kube-api-access-fdnvh:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    Optional:                false
    DownwardAPI:             true
QoS Class:                   Burstable
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:                      <none>

=== STEP 8: PVC Status ===
NAME                         STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   AGE
iqgeo-platform-shared-data   Pending                                      efs            31s

=== SUMMARY ===
[Fri Feb 13 05:48:17 PM UTC 2026] Fix process completed
Check terraform-fix-output.txt for full details

=== FINAL STATUS ===
Deployment replicas:
3
Running pods:
0
Pending pods:
3

=========================================
Script completed at Fri Feb 13 05:48:17 PM UTC 2026
=========================================
