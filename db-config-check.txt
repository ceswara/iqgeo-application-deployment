=========================================
Database Configuration Check - Sat Feb 21 05:55:53 AM UTC 2026
=========================================

=== 1. ConfigMap for IQGeo Platform ===
apiVersion: v1
data:
  APACHE_PORT_OVERRIDE: "8080"
  BEAKER_SESSION_TYPE: ext:memcached
  BEAKER_SESSION_URL: iqgeo-memcached:11211
  DEBUG: "false"
  IQGEO_HOST: iqgeo-tf.techwave.com
  MYW_DB_HOST: ""
  MYW_DB_NAME: iqgeo
  MYW_DB_PASSWORD: iqgeo
  MYW_DB_PORT: "5432"
  MYW_DB_USERNAME: postgres
  MYW_TASK_TIMEOUT: "1800"
  NODE_OPTIONS: --max_old_space_size=2048
  PGDATABASE: postgres
  PGHOST: ""
  PGPASSWORD: iqgeo
  PGUSER: postgres
  REPLICATION_SYNC_URL: https://iqgeo-tf.techwave.com
  RQ_REDIS_URL: redis://iqgeo-redis-master:6379/0
  SHARED_DIRECTORY: /shared-data
kind: ConfigMap
metadata:
  annotations:
    meta.helm.sh/release-name: iqgeo
    meta.helm.sh/release-namespace: iqgeo
  creationTimestamp: "2026-02-21T05:23:15Z"
  labels:
    app: iqgeo-platform
    app.kubernetes.io/managed-by: Helm
    chart: iqgeo-platform-2.14.0
    heritage: Helm
    release: iqgeo
  name: iqgeo-platform-configmap
  namespace: iqgeo
  resourceVersion: "3689686"
  uid: 3e1163dd-35bd-4901-9682-1a029bd0d2f0

=== 2. Database Environment Variables in Pod ===
Pod: iqgeo-platform-6bccdd6fd6-gkwd9

Expecting value: line 1 column 1 (char 0)
No env vars in init container

=== 3. Init Container Command/Args ===
{
    "command": [
        "bash",
        "-c",
        "until pg_isready; do echo \"ERROR: $MYW_DB_HOST:${MYW_DB_PORT:-5432} not accepting connections\"; done"
    ],
    "envFrom": [
        {
            "configMapRef": {
                "name": "iqgeo-platform-configmap",
                "optional": false
            }
        }
    ],
    "image": "harbor.delivery.iqgeo.cloud/nmti-trials/editions-nmt-comms-cloud:7.3",
    "imagePullPolicy": "IfNotPresent",
    "name": "init-ensure-db-connection",
    "resources": {},
    "terminationMessagePath": "/dev/termination-log",
    "terminationMessagePolicy": "File",
    "volumeMounts": [
        {
            "mountPath": "/var/run/secrets/kubernetes.io/serviceaccount",
            "name": "kube-api-access-vlpvk",
            "readOnly": true
        }
    ]
}

=== 4. Helm Values (platform.database) ===
  database:
    host: 10.42.42.9
    name: iqgeo
    password: 6hPfVGmi9gMMhhmE5pR64xDz4ahcQnvg
    port: "5432"
    user: iqgeo
  persistence:
    accessMode: ReadWriteOnce
    accessModes:
    - ReadWriteOnce
    enabled: true

=== 5. Check if DB Host is Reachable from Cluster ===
Testing connectivity to 10.42.42.9:5432...
All commands and output from this session will be recorded in container logs, including credentials and sensitive information passed through the command prompt.
If you don't see a command prompt, try pressing enter.
warning: couldn't attach to pod/test-db-connection, falling back to streaming logs: unable to upgrade connection: container test-db-connection not found in pod test-db-connection_iqgeo
10.42.42.9 (10.42.42.9:5432) open
pod "test-db-connection" deleted from iqgeo namespace

=== 6. Full Pod Spec (Init Container) ===
  initContainers:
  - command:
    - bash
    - -c
    - 'until pg_isready; do echo "ERROR: $MYW_DB_HOST:${MYW_DB_PORT:-5432} not accepting
      connections"; done'
    envFrom:
    - configMapRef:
        name: iqgeo-platform-configmap
        optional: false
    image: harbor.delivery.iqgeo.cloud/nmti-trials/editions-nmt-comms-cloud:7.3
    imagePullPolicy: IfNotPresent
    name: init-ensure-db-connection
    resources: {}
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: File
    volumeMounts:
    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
      name: kube-api-access-vlpvk
      readOnly: true
  nodeName: hlegeo7.iqgeo.local
  preemptionPolicy: PreemptLowerPriority
  priority: 0
  restartPolicy: Always
  schedulerName: default-scheduler
  securityContext: {}
  serviceAccount: iqgeo-platform
  serviceAccountName: iqgeo-platform
  terminationGracePeriodSeconds: 30
  tolerations:
  - effect: NoExecute
    key: node.kubernetes.io/not-ready
    operator: Exists
    tolerationSeconds: 300
  - effect: NoExecute
    key: node.kubernetes.io/unreachable
    operator: Exists
    tolerationSeconds: 300
  volumes:
  - name: iqgeo-platform-shared-data
    persistentVolumeClaim:
      claimName: iqgeo-platform-shared-data
  - name: kube-api-access-vlpvk
    projected:
      defaultMode: 420
      sources:
      - serviceAccountToken:
          expirationSeconds: 3607
          path: token
      - configMap:
          items:

=========================================
Check Complete - Sat Feb 21 05:56:00 AM UTC 2026
=========================================
