=========================================
IQGeo Deployment Status - Sat Feb 21 06:03:59 AM UTC 2026
=========================================

MODE: STATUS - Just check current status
Run with 'fix' to apply fixes: ./deploy-and-validate.sh fix

=== 1. PVC Status ===
  Status: NotFound
  Access Mode: NotFound
No resources found in iqgeo namespace.

=== 2. Deployment Status ===
  Replicas: 1 (Ready: )
NAME             READY   UP-TO-DATE   AVAILABLE   AGE
iqgeo-platform   0/1     1            0           47s

=== 3. Pods ===
NAME                               READY   STATUS    RESTARTS   AGE
iqgeo-memcached-69d7fd799c-wrtqm   1/1     Running   0          47s
iqgeo-platform-6bccdd6fd6-nxt56    0/1     Pending   0          46s

=== 4. Pod Events/Issues ===
--- pod/iqgeo-platform-6bccdd6fd6-nxt56 ---
      RQ_REDIS_URL:               redis://iqgeo-redis-master:6379/1
      SEND_ERROR_LOG_TO_STDERR:   YES
      SEND_ACCESS_LOG_TO_STDOUT:  YES
      APACHE_TIMEOUT:             1200
    Mounts:
      /shared-data from iqgeo-platform-shared-data (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-99b4p (ro)
Conditions:
  Type           Status
  PodScheduled   False 
Volumes:
  iqgeo-platform-shared-data:
    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)
    ClaimName:  iqgeo-platform-shared-data
    ReadOnly:   false
  kube-api-access-99b4p:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    Optional:                false
    DownwardAPI:             true
QoS Class:                   Burstable
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason            Age   From               Message
  ----     ------            ----  ----               -------
  Warning  FailedScheduling  46s   default-scheduler  0/3 nodes are available: persistentvolumeclaim "iqgeo-platform-shared-data" is being deleted. preemption: 0/3 nodes are available: 3 Preemption is not helpful for scheduling..
  Warning  FailedScheduling  20s   default-scheduler  0/3 nodes are available: persistentvolumeclaim "iqgeo-platform-shared-data" not found. preemption: 0/3 nodes are available: 3 Preemption is not helpful for scheduling..

=== 5. Harbor Secret ===
  ✅ Harbor secret exists in iqgeo namespace
NAME                TYPE                             DATA   AGE
harbor-repository   kubernetes.io/dockerconfigjson   1      48s

=== 6. HPA Status ===
  ⚠️  HPA found (may override replicas)
NAME                         REFERENCE                 TARGETS         MINPODS   MAXPODS   REPLICAS   AGE
iqgeo-platform--worker-hpa   Deployment/iqgeo-worker   <unknown>/20%   1         3         0          46s

=========================================
SUMMARY
=========================================
❌ PVC not bound (Status: NotFound)
❌ Pods not ready: /1

⚠️  ISSUES FOUND - See above

RECOMMENDED FIX:
1. Ensure Harbor credentials in iqgeo-onprem-deployment/terraform/terraform.tfvars
2. cd /path/to/iqgeo-onprem-deployment/terraform && terraform apply
3. cd /path/to/iqgeo-application-deployment && terraform apply -replace=helm_release.iqgeo
4. Run this script again: ./deploy-and-validate.sh

=========================================
Completed at Sat Feb 21 06:03:59 AM UTC 2026
=========================================
